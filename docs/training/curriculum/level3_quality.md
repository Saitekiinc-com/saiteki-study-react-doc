# Lv.3 発展: 品質・保守性・パフォーマンス

Lv.3のゴールは、<strong>「パフォーマンスとセキュリティを考慮し、将来にわたって保守しやすい高品質なシステムを設計できること」</strong>です。
「動けばいい」から卒業し、プロフェッショナルとしての品質基準を満たすコードを書きます。

## 1. テストと品質保証 (QA)
変更に強く、バグの少ないコードベースを維持します。

### 学習項目
*   **テストのピラミッド**:
    *   **単体テスト (Unit)**: 純粋な関数やビジネスロジックのテスト（Jest/Vitest）。
    *   **統合テスト (Integration)**: コンポーネントの振る舞いや、APIエンドポイントのテスト（React Testing Library, APIテスト）。
    *   **E2Eテスト**: ブラウザ操作をシミュレートしたシステム全体のテスト（Playwright/Cypress）。
*   **テスト戦略**:
    *   実装詳細ではなく「振る舞い」をテストする。
    *   カバレッジ（網羅率）の考え方。

### チェックリスト
- [ ] ユーティリティ関数の単体テストを書ける。
- [ ] ボタンクリックで表示が変わるコンポーネントのテストを書ける。
- [ ] APIの正常系・異常系のテストケースを網羅できる。

## 2. パフォーマンス最適化 (Performance)
ユーザーにストレスを与えない高速なアプリケーションを作ります。

### 学習項目
*   **フロントエンドの最適化**:
    *   再レンダリングの抑制 (`React.memo`, `useMemo`, `useCallback`)。
    *   コード分割 (`React.lazy`) による初期ロード短縮。
    *   Web Vitals (LCP, CLS, FID) の計測と改善。
*   **バックエンドの最適化**:
    *   **N+1問題**の理解と解消（Eager Loading）。
    *   データベースのインデックス設計（B-Tree, 複合インデックス）。
    *   キャッシュ戦略（Redis, CDN）の活用。

### チェックリスト
- [ ] React Profilerを使ってレンダリングのボトルネックを特定できる。
- [ ] クエリログを見てN+1問題を特定し、解消できる。
- [ ] `EXPLAIN` でクエリ実行計画を確認し、インデックスが効いているか判断できる。

## 3. セキュリティと保守性 (Security & Maintainability)
安全で読みやすいコードを書きます。

### 学習項目
*   **Webセキュリティ (OWASP Top 10)**:
    *   XSS (クロスサイトスクリプティング) 対策。
    *   SQLインジェクション対策（ORM/プリペアードステートメント）。
    *   CSRF, CORS の理解と設定。
*   **保守性の高い設計**:
    *   カスタムフックによるロジックの分離。
    *   適切な状態管理（Global vs Local, Server vs Client）。
    *   アクセシビリティ (a11y) への配慮。

### チェックリスト
- [ ] 外部APIキーなどをコードに直書きせず、環境変数で管理できる。
- [ ] 複雑なコンポーネントからロジックをカスタムフックに切り出せる。
- [ ] スクリーンリーダーでの読み上げを意識したマークアップができる。

## 推奨学習リソース
*   **[React Testing Library](https://testing-library.com/)**: テストのベストプラクティス。
*   **[Web Vitals](https://web.dev/vitals/)**: パフォーマンス指標。
*   **[OWASP Top 10](https://owasp.org/www-project-top-ten/)**: セキュリティリスク。
